# Тестовое задание (Laravel + PHP 8.1)

##  Формулировка задачи
Реализовать сервис поиска **максимума в скользящем окне**.  

Дано:
- массив чисел (`int` или `float`, включая отрицательные);
- ширина окна `k`.

Нужно вернуть массив максимумов для каждого сдвига окна слева направо.  
Решение должно работать за линейное время `O(n)` и с дополнительной памятью `O(k)`.

**Пример:**
```php
$arr = [1, 3, -1, -3, 5, 3, 6, 7];
$k = 3;
// Результат: [3, 3, 5, 5, 6, 7]
```

---

## Структура проекта и созданные классы

### 1. Сервис
**`app/Services/SlidingWindowMaxService.php`**
- Основная логика алгоритма.
- Метод:
  ```php
  public function compute(array $arr, int $k): array;
  ```
- Работает через монотонную двустороннюю очередь (deque):
  - удаляет из головы индексы, вышедшие за пределы окна;
  - удаляет из хвоста индексы элементов, меньших либо равных текущему;
  - максимум окна всегда находится в голове deque.

### 2. Консольная команда
**`app/Console/Commands/SlidingWindowMaxCommand.php`**
- Позволяет запускать алгоритм из CLI.
- Сигнатура:
  ```bash
  php artisan metrics:swmax --k=3 -- 1 3 -1 -3 5 3 6 7
  ```
- На выходе:
  ```
  3 3 5 5 6 7
  ```

### 3. Тесты
**`tests/Unit/SlidingWindowMaxServiceTest.php`**
- Проверяют корректность работы сервиса.
- Кейсы:
  - базовый пример с целыми числами;
  - массив с float;
  - `k = 1` (результат = исходный массив);
  - `k = 0` или `k > n` → исключение;
  - пустой массив;
  - массив из одинаковых элементов.

---

##  Как работает код

1. При вызове метода `compute`:
   - Проверяется валидность параметров (`k > 0` и `k <= n`).
   - Если массив пустой — возвращается пустой результат.
2. В цикле:
   - Из очереди удаляются индексы элементов, которые вышли за пределы окна.
   - Из хвоста удаляются элементы меньше или равные текущему.
   - Текущий индекс добавляется в очередь.
   - Как только размер окна достигает `k`, в результат пишется максимум (элемент по индексу в голове очереди).
3. Результат возвращается как массив чисел.
4. В консольной команде входные параметры парсятся из аргументов, затем вызывается сервис и результат выводится строкой.
5. Unit-тесты прогоняют все основные сценарии, включая пограничные случаи.

---

##  Пример запуска
```bash
php artisan metrics:swmax --k=3 -- 1 3 -1 -3 5 3 6 7
```
Результат:
```
3 3 5 5 6 7
```
